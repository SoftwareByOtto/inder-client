(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{242:function(e,t,r){"use strict";r.r(t);r(160),r(41);var n,o=r(10),c={middleware:["auth"],asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.params,t.next=3,r.$get("/profile/".concat(n.id));case 3:return o=t.sent,t.next=6,r.$get("/messages/".concat(n.id));case 6:return c=t.sent,t.abrupt("return",{profile:o,messages:c});case 8:case"end":return t.stop()}}),t)})))()},data:function(){return{messageToSend:""}},methods:{sendMessage:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("/messages",{id:e.profile.id,body:e.messageToSend});case 2:r=t.sent,console.log(r.data),e.$toast.success(r.data),n.emit("message",{body:e.messageToSend,recipientId:Number(e.$route.params.id)}),e.messageToSend="";case 7:case"end":return t.stop()}}),t)})))()}},computed:{},mounted:function(){var e=this;this.$io.on("open",(function(){(n=e.$io.subscribe("chat")).emit("open"),n.on("message",(function(t){console.log(t),e.messages.push({user:{username:t.user},body:t.body,created_at:new Date}),e.$toast.show("".concat(t.user,": ").concat(t.body))}))}))}},m=r(33),component=Object(m.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("h1",[e._v("Profile of "+e._s(e.profile.username.toUpperCase()))]),e._v(" "),r("b-card",{attrs:{header:"Profile"}},[r("img",{attrs:{src:e.profile.avatar,alt:""}}),e._v(" "),r("h1",[e._v(e._s(e.profile.bio))]),e._v(" "),r("h2",[e._v("messages")]),e._v(" "),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[r("b-form-group",{attrs:{label:"message"}},[r("b-input",{model:{value:e.messageToSend,callback:function(t){e.messageToSend=t},expression:"messageToSend"}})],1),e._v(" "),r("b-button",{attrs:{type:"submit"}},[e._v("submit")])],1),e._v(" "),e._l(e.messages,(function(t){return r("div",{key:t.body},[r("b-card",{staticClass:"mt-3",attrs:{title:(t.user&&t.user.username)+" said","sub-title":"sent at "+t.created_at,"img-src":t.user&&t.user.avatar,"img-left":""}},[e._v(e._s(t.body))])],1)}))],2)],1)],1)}),[],!1,null,"5c759aa7",null);t.default=component.exports}}]);